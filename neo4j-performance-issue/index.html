<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-performance-config">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<title data-rh="true">Performance configuration | Neo4j Performance Guide</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://neo4j-guide.com//neo4j-performance-issue"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Performance configuration | Neo4j Performance Guide"><meta data-rh="true" name="description" content="Every database performance can depend on design, configuration, and the end hardware it runs on."><meta data-rh="true" property="og:description" content="Every database performance can depend on design, configuration, and the end hardware it runs on."><link data-rh="true" rel="canonical" href="https://neo4j-guide.com//neo4j-performance-issue"><link data-rh="true" rel="alternate" href="https://neo4j-guide.com//neo4j-performance-issue" hreflang="en"><link data-rh="true" rel="alternate" href="https://neo4j-guide.com//neo4j-performance-issue" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.198e1151.css">
<link rel="preload" href="/assets/js/runtime~main.d46dc732.js" as="script">
<link rel="preload" href="/assets/js/main.3a254c8e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Neo4j Performance Guide</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/neo4j-slow-import-data-performance">Import data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/neo4j-slow-query-performance-issue">Indexing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/neo4j-slow-write-performance">Write speed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/neo4j-out-of-memory">Out of memory exception</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/neo4j-performance-issue">Performance configuration</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Performance configuration</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Performance configuration</h1></header><p>Every database performance can depend on design, configuration, and the end hardware it runs on.
If you ever run into the scaling bottleneck in your database, you know what I am talking about.
Neo4j is a database written in Java, and it runs inside a JVM. From the start, you can assume that Neo4j won&#x27;t be the most performant database on the market. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="neo4j-performance-issues">Neo4j performance issues<a class="hash-link" href="#neo4j-performance-issues" title="Direct link to heading">​</a></h2><p>In order to put things in perspective, take a look at this issue from Stack Overflow: <a href="https://stackoverflow.com/questions/29303841/neo4j-performance-challenge-how-to-improve" target="_blank" rel="noopener noreferrer">&quot;Neo4j Performance Challenge - How to Improve?&quot;</a>. As you can see from the issue, the user has 12.5 million nodes and 64 million relationships.
The scale of this graph is big. Of course, there are always bigger graphs, but this is sufficient to get a sense of scale. User describes issue in the right manner, taking in consideration <strong>graph schema</strong>, <strong>query profile</strong>, <strong>Neo4j properties</strong>, <strong>CPU</strong>, <strong>Memory</strong>, <strong>Disk</strong> and some less relevant things. By looking at all these variables, you can see a lot of complexity there. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tunning-neo4j-performance-issues">Tunning Neo4j performance issues<a class="hash-link" href="#tunning-neo4j-performance-issues" title="Direct link to heading">​</a></h2><p>In order to help fight common performance issues, here are a few tips and tricks on how to improve Neo4j performance.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-your-cypher-query">Understanding your Cypher query<a class="hash-link" href="#understanding-your-cypher-query" title="Direct link to heading">​</a></h3><p>One of the common issues can come from not understanding your Cypher queries in detail. You can find where the performance issue is coming from by analyzing the query. Neo4j has a dedicated Cypher statement, <code>PROFILE</code>, that you can use for Cypher optimizations. Take a look at this example: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PROFILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MATCH (p)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RETURN p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As a result, you will get all details regarding the execution of this query, such as time, memory, DB hits, etc.
For more details, check out this <a href="https://neo4j.com/docs/cypher-manual/current/query-tuning/basic-example/" target="_blank" rel="noopener noreferrer">guide</a>. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-your-graph-schema">Understanding your graph schema<a class="hash-link" href="#understanding-your-graph-schema" title="Direct link to heading">​</a></h3><p>If you understand your graph schema and insights that can be extracted from the graph, you can see what the important nodes and relationships are. In order to boost database performance, you can use indexes and meaningful nodes/relationships to index them. This approach has pros and cons, but you can balance writing and reading speed. It is up to you to decide how to structure your graph. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="neo4j-properties">Neo4j properties<a class="hash-link" href="#neo4j-properties" title="Direct link to heading">​</a></h3><p>You can use a whole set of configuration properties to improve Neo4j performance. Since Neo4j has some memory settings related to JVM, you can look at <a href="/neo4j-out-of-memory">memory guide</a>. In the linked guide, you can find configurations that can help with performance.
One interesting configuration property is also related to memory but it&#x27;s Neo4j specific. It is called <code>pagecache</code>. Page cache defines the amount of memory cached in the RAM. The cache is used for important data such as indexes to avoid expensive disc access. You can set it up in neo4j.conf file like this: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dbms.memory.pagecache.size=16GB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The page cache will improve write and read performance significantly. The downside here is that it is quite small for graph scale because of RAM limitations. The page cache will take 50% of available RAM if you do not configure it. </p><p>For more details on performance tunning, take a look at Neo4j <a href="https://neo4j.com/developer/guide-performance-tuning/" target="_blank" rel="noopener noreferrer">guide</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/neo4j-out-of-memory"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Out of memory exception</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#neo4j-performance-issues" class="table-of-contents__link toc-highlight">Neo4j performance issues</a></li><li><a href="#tunning-neo4j-performance-issues" class="table-of-contents__link toc-highlight">Tunning Neo4j performance issues</a><ul><li><a href="#understanding-your-cypher-query" class="table-of-contents__link toc-highlight">Understanding your Cypher query</a></li><li><a href="#understanding-your-graph-schema" class="table-of-contents__link toc-highlight">Understanding your graph schema</a></li><li><a href="#neo4j-properties" class="table-of-contents__link toc-highlight">Neo4j properties</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"></div></footer></div>
<script src="/assets/js/runtime~main.d46dc732.js"></script>
<script src="/assets/js/main.3a254c8e.js"></script>
</body>
</html>